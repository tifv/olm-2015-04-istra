\section*{Комбинаторика}

% $authors:
% - Олег Орлов

% $matter[with-solutions]:
% - verbatim: \begingroup\let\ifincludesolutions\iftrue
% - .[-with-solutions]
% - verbatim: \endgroup % \let\ifincludesolutions

\begingroup\providecommand\ifincludesolutions{\iffalse}

\ifincludesolutions
\subsection*{Версия с решениями}
\fi

\begin{problems}

\item
Даны $8$ гирек весом $1, 2, \ldots, 8$ грамм, но~неизвестно, какая из~них
сколько весит.
Барон Мюнхгаузен утверждает, что помнит, какая из~гирек сколько весит,
и~в~доказательство своей правоты готов провести одно взвешивание, в~результате
которого будет однозначно установлен вес хотя~бы одной из~гирь.
Не~обманывает~ли он?

\end{problems}

% spell \text{г}

\ifincludesolutions
\emph{Ответ:} не~обманывает.
\par
Заметим, что сумма весов пяти гирек не~менее
\(
    1\,\text{г} + 2\,\text{г} + 3\,\text{г} + 4\,\text{г} + 5\,\text{г}
=
    15\,\text{г}
\),
а~сумма весов двух гирек не~более $7\,\text{г} + 8\,\text{г} = 15\,\text{г}$,
причем только в~случае этих наборов две гирьки уравновесят пять.
Следовательно, если барон положит на~одну чашку весов две гирьки, а~на~другую
пять, и~весы установятся в~равновесии, то~он~сможет утверждать, что осталась
гирька весом $6\,\text{г}$.
\fi % \ifincludesolutions

\begin{problems}

\item
Турист, приехавший в~Москву на~поезде, весь день бродил по~городу.
Поужинав в~кафе на~одной из~площадей, он~решил вернуться на~вокзал и~при этом
идти только по~улицам, по~которым он~шел до~этого нечетное число раз.
Докажите, что он~всегда может это сделать.

\end{problems}

\ifincludesolutions
Рассмотрим граф, в~котором вершинами являются вокзал, площадь
и~перекрестки Москвы, а~ребрами улицы по~которым турист проходил нечетное число
раз, идя от~вокзала до~площади.
Вершину, соответствующую площади обозначим через $A$, вокзалу~--- $B$.
Заметим, что степень каждой вершины, соответствующей перекрестку четна,
а~вершин $A$ и~$B$~--- нечетна.
Действительно, пусть есть некоторый перекресток~$C$.
В~пути туриста от~вокзала до~площади, сколько раз он~заходил на~перекресток~$C$
столько и~выходил, значит суммарное число проходов по~улицам выходящим
из~перекрестка~$C$~--- четна, поэтому и~число улиц выходящих из~$C$ по~которым
турист проходил нечетное число раз~--- тоже четно.
Аналогично получаем, что степени вершин $A$ и~$B$ нечетны (в~случае, например,
с~вокзалом, выходил турист из~него на~один раз больше в~пути чем заходил).
Отсюда в~получившемся графе существует Эйлеров путь, причем концами этого пути
будут вершины $A$ и~$B$, значит от~$A$ до~$B$ можно добраться по~ребрам, что
и~требовалось.
\fi % \ifincludesolutions

\begin{problems}

\item
На~отрезке~$AB$ отмечено $2 n$ точек, симметричных относительно середины~$AB$.
При этом $n$ из~них покрашены в~красный цвет, оставшиеся $n$ -- в~синий.
Докажите, что сумма расстояний от~точки~$A$ до~красных точек равна сумме
расстояний от~точки~$B$ до~синих точек.

\end{problems}

\ifincludesolutions
Обозначим середину отрезка~$AB$ через $O$, из~условия, по~обе
стороны от~точки~$O$ находится по~$n$ отмеченных точек (пусть также точка~$A$
находится левее точки~$B$).
Заметим, что если слева от~точки~$O$ все отмеченные точки красные, то~тогда
справа от~точки~$O$ все отмеченные точки~--- синие и~задача очевидна.
Обозначим сумму расстояний от~точки~$A$ до~красных $S_A$, сумму расстояний
от~$B$ до~синих~--- $S_B$.
Теперь пусть слева от~точки~$O$ есть хотя~бы одна синяя точка~$X$, тогда справа
от~точки~$O$ есть хотя~бы одна красная точка~$Y$, поменяем их~местами.
Тогда обе суммы $S_A$ и~$S_B$ уменьшатся на~$|XY|$, то~есть разность
$S_A - S_B$ не~изменится.
Такими операциями мы~придем к~ситуации, когда слева от~точки~$O$ только красные
отмеченные точки, справа~--- только синие, но~в~этом случае $S_A - S_B = 0$,
значит всегда $S_A = S_B$, что и~требовалось.
\fi % \ifincludesolutions

\begin{problems}

\item
Несколько ребят стоят в~круг.
У~каждого есть некоторое количество конфет.
Сначала у~каждого четное количество конфет.
По~команде каждый передает половину своих конфет стоящему справа.
Если после этого у~кого-нибудь оказалось нечетное количество конфет, то~ему
извне добавляется одна конфета.
Это повторяется много раз.
Докажите, что настанет время, когда у~всех будет поровну конфет.

\end{problems}

\ifincludesolutions
Пусть $2 m$~--- наибольшее, а~$2 n$~--- наименьшее количество
конфет у~одного человека.
После одного круга обмена и, возможно, добавления конфет извне, $m$
не~увеличится, а~количество людей, имеющих $2 n$ конфет, уменьшится.
(Действительно, каждый человек оставляет себе не~более $m$ конфет, а~получает
не~более $m + 1$ конфеты.
Причем, если он~получил $m + 1$ конфету, то~одна из~них была добавлена извне,
значит, после получения $m$ конфет у~него стало не~более $2 m - 1$ конфеты.
С~другой стороны, если $m > n$, среди людей имевших $2 n$ конфет, найдется
человек, который получит более $n$ конфет.)
Значит, через несколько шагов $n$ увеличится.
Так как $n$ увеличивается, а~$m$ не~увеличивается, наступит момент, когда $n$
станет равным $m$.
\fi % \ifincludesolutions

\begin{problems}

\item
Хроматическое число графа~$G$ равно $k$.
Рассмотрим некоторую правильную раскраску в~$k$~цветов.
Докажите, что в~этом графе существует простой путь, вдоль которого встречаются
вершины всех $k$ цветов ровно по~одному разу.
(Правильной раскраской вершин графа называется такая раскраска, что никакие две
вершины одного цвета не~смежны.
Хроматическим числом графа называется такое минимальное натуральное~$k$, что
существует правильная раскраска вершин в~$k$~цветов).

\end{problems}

\ifincludesolutions
Цвета, в~которые покрашен граф, занумеруем числами от~$1$ до~$k$.
Те~вершины цвета~$2$, которые не~соседствуют ни~с~какими вершинами цвета~$1$,
перекрасим в~цвет~$1$.
Новая раскраска будет правильной, поэтому в~ней $k$~цветов.
Значит, какие-то вершины цвета~$2$ не~перекрашены и~потому соседствуют
с~вершинами цвета~$1$.
Затем, вершины цвета~$3$, которые не~соседствуют с~вершинами цвета~$2$,
не~перекрашенными в~цвет~$1$, перекрасим в~цвет~$2$, и~т.~д. вплоть
до~последнего цвета.
На~каждом шаге получается правильная раскраска, поэтому хотя~бы одна из~вершин
каждого цвета останется неперекрашенной.
После этого рассмотрим какую-либо вершину цвета~$k$.
Она не~перекрашена, и~потому соседствует с~вершиной цвета $(k - 1)$.
Эта вершина тоже не~перекрашена, так как иначе ее~первоначальный цвет был~бы
$k$, и~она вначале соседствовала~бы с~вершиной того~же цвета, что невозможно.
Раз вершина не~перекрашена, то~она соседствует с~вершиной цвета $(k - 2)$,
и~т.~д. Продолжая этот процесс, построим путь длины $k$ из~вершин $k$ цветов,
которые не~были перекрашены.
\fi % \ifincludesolutions

\begin{problems}

\item
По~одной стороне бесконечного коридора расположено бесконечное количество
комнат, занумерованных числами от~минус бесконечности до~плюс бесконечности.
В~комнатах живут $2015$ пианистов (в~одной комнате могут жить несколько
пианистов), кроме того, в~каждой комнате находится по~роялю.
Каждый день какие-то два пианиста, живущие в~соседних комнатах
($K$-й и~$(K + 1)$-й), приходят к~выводу, что они мешают друг другу,
и~переселяются соответственно в~$(K - 1)$-ю и~$(K + 2)$-ю комнаты.
Докажите, что через конечное число дней эти переселения прекратятся
(пианисты, живущие в~одной комнате, друг другу не~мешают).

\end{problems}

\ifincludesolutions
Рассмотрим произвольные три подряд идущие комнаты
(с~номерами $n$, $n + 1$, $n + 2$).
Если в~одной из~них когда-нибудь окажется пианист, то~эта тройка комнат уже
никогда не~опустеет: чтобы покинуть эту тройку, пианист должен переселиться
из~$n$-й комнаты в~$(n - 1)$-ю (или из~$(n + 2)$-й в~$(n + 3)$-ю, что
симметрично), но~тогда кто-то переселяется из~$(n + 1)$-й в~$(n + 2)$-ю,
и~на~этом шаге рассматриваемая тройка комнат непуста.
Разобьем весь коридор на~такие тройки.
Количество <<занятых>> троек не~превосходит $9$, и~<<занятые>> тройки
не~освобождаются, следовательно, пианисты никогда не~покидают некоторую
ограниченную часть коридора.
С~другой стороны, сумма квадратов номеров комнат, в~которых живут пианисты
(с~учетом кратности) при каждом переселении возрастает, поскольку
$k^2 + (k + 1)^2 < (k - 1)^2 + (k + 2)^2$.
Значит, когда-нибудь переселения прекратятся.
\fi % \ifincludesolutions

\begin{problems}

\item
Каждые два из~21 города соединены прямым рейсом одной из~четырех авиакомпаний.
Докажите, что существует замкнутый маршрут из~четырех рейсов одной
авиакомпании.

\end{problems}

\ifincludesolutions
Все маршруты образуют полный граф на~$21$ вершине, ребра которого раскрашены
в~$4$ цвета.
Если искомого замкнутого маршрута нет, любые две вершины этого графа связаны
не~более чем одним одноцветным маршрутом длины~$2$.
Стало быть, всего таких маршрутов не~более, чем $4 C_{21}^2 = 840$.
С~другой стороны, пусть из~данной вершины выходит $a$, $b$, $c$ и~$d$ ребер
первого, второго, третьего и~четвертого цветов соответственно.
Тогда число одноцветных маршрутов длины $2$, для которых эта
вершина~--- средняя, равно
\begin{align*}
    &
    \frac{
        a (a - 1) + {} b (b - 1) + c (c - 1) + d (d - 1)
    }{2}
=\\&{}=
    \frac{a^2 + b^2 + c^2 + d^2 - (a + b + c + d)}{2}
=\\&{}=
    \frac{a^2 + b^2 + c^2 + d^2}{2} - 10
.\end{align*}
По~неравенству между средним арифметическим и~средним квадратическим имеем:
\(
    a^2 + b^2 + c^2 + d^2
\geq
    (a + b + c + d)^2 / 4
=
    100
\).
Таким образом, каждая вершина нашего графа является средней минимум для
$100 / 2 - 10 = 40$ одноцветных маршрутов, причем минимум достигается только
в~случае, когда из~вершины выходит ровно по~$5$ маршрутов каждого цвета.
И~только в~этом случае сумма количеств одноцветных маршрутов длины $2$ по~всем
вершинам равна $840$, в~остальных~--- больше.
Но~такой случай невозможен, потому что тогда, оставив в~нашем графе только
ребра одного какого-то цвета, мы~получили~бы граф с~нечетным числом нечетных
вершин.
\fi % \ifincludesolutions

\endgroup % \providecommand\ifincludesolutions

